# 仕様的ななにか

## 大雑把な仕様

### アプリケーション全体

- 基本的に Web App ではない方の TweetDeck の機能を再現
  - マルチカラムな UI
    - Home
    - User
    - Notifications
      - 少し面倒そう
    - Search
    - List
    - Collection/Bookmarks
      - これアクセスできるのかな
    - Trending
      - これアクセスできるのかな 2
    - Likes
    - Messages
      - 少し面倒そう 2
    - Mentions
    - Followers
    - Scheduled
      - これアクセスできるのかな 3
    - Messages(all accounts)
      - 少し面倒そう 3
    - Mentions(all accounts)
    - Activity
      - これアクセスできるのかな 4
  - サイドナビゲーション
    - ツイート
    - 検索
    - カラム操作
    - 設定
  - 疑似ユーザーストリーム
    - TweetDeck 同様数秒でのポーリングで取得
    - 通常は不可能なのでユーザーの自己責任で解禁
- 本家 TweetDeck よりも軽量にしたい
  - アクションによって新しく現れる要素は既存の要素の上に乗る形で表示する
    - 要素の「移動」を極力減らして軽量化
  - 軽量フレームワークの採用(SolidJS)
  - ミドルレンジスマホでも使えるレベルにはしたい
- 自由度の高いカスタマイズ性
  - テーマ機能
  - UserStyle(CSS)/UserScript(JavaScript)の保存・実行環境の内蔵
    - JS の実行はセキュリティ的にいいのかという問題はなくもない
      - TwitterAPI のトークンとかを HttpOnly な Cookie にしまうとかで対策になるかもしれない
  - CK/CS の差し替え
- モバイル端末フルサポート
  - モバイル端末に適したレイアウト・挙動に変更可能
    - ウィンドウ幅かなんかで判別して自動切り替えもあり

## 少し細かい仕様

### アプリケーション全体

- フロントとバックは独立状態で運用
  - フロントは安定版と開発版の二箇所でホスト
    - 安定版は Cloudflare Pages の予定(転送量重視)
    - 開発版は Vercel の予定(デプロイ回数重視)
  - バックエンドは不明
    - _担当者さんホスト場所教えて下さい_
- リクエストやデータ処理はすべてフロントエンド主体
  - バックエンドはレスポンスを返すことに専念
  - トークン等機密情報は HttpOnly な cookie で管理・送信

### フロントエンド

- TweetDeck と同様の URL 変動なしの SPA
- SolidJS を使用
  - UI フレームワークはなし
- 情報(トークン・設定等)はブラウザに保持
  - 設定は JSON でのイン/エクスポート可能
  - 何らかのオンラインストレージ使って同期取れるようにしてもいいかも？
- ES2017 以上なブラウザで動作
  - **IE は無視**
  - Safari には対応します

### バックエンド

- RestfulAPI っぽい構成
- Koa.js 使用
- 実質 TwitterAPI の wrapper
  - フロントが cookie で保持してる ck/cs やアクセストークンを使ってリクエスト
    - ck/cs 未指定の場合はバックエンドデフォルトの ck/cs を使用
- 担当じゃないので詳しくは書きません
